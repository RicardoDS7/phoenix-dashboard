(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{3819:(r,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});var a=s(5155),i=s(2115),t=s(3843),o=s(5317);let n=()=>{var r,e,s,n,l,d,c,m,h,x,b;let[g,p]=(0,i.useState)([]),[j,u]=(0,i.useState)(""),[y,N]=(0,i.useState)([]),[D,S]=(0,i.useState)(""),[f,v]=(0,i.useState)(null),[F,k]=(0,i.useState)(null),[_,w]=(0,i.useState)(!0),[L,P]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(async()=>{try{let r=await (0,o.GG)((0,o.rJ)(t.db,"clients")),e=[];r.forEach(r=>{e.push({id:r.id,data:r.data()})}),p(e),w(!1)}catch(r){console.error("Error fetching projects:",r)}})()},[]),(0,i.useEffect)(()=>{j&&((async()=>{try{let r=(0,o.H9)(t.db,"clients",j),e=await (0,o.x7)(r);e.exists()?(v(e.data()),console.log(e.data())):v(null),P(!0);let s=await (0,o.GG)((0,o.rJ)(r,"quotes")),a=[];s.forEach(r=>{a.push({id:r.id,data:r.data()})}),N(a),P(!1)}catch(r){console.error("Error fetching project data and quotes:",r)}})(),S(""),k(null))},[j]),(0,i.useEffect)(()=>{j&&D&&(async()=>{try{let r=(0,o.H9)(t.db,"clients",j,"quotes",D),e=await (0,o.x7)(r);e.exists()?k(e.data()):k(null)}catch(r){console.error("Error fetching quote data:",r)}})()},[j,D]),(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Project Summary"}),(0,a.jsx)("div",{className:"mb-4 no-print",children:(0,a.jsx)("button",{onClick:()=>{window.print()},className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Print PDF"})}),_?(0,a.jsx)("p",{children:"Loading projects..."}):(0,a.jsxs)("div",{className:"mb-4 no-print",children:[(0,a.jsx)("label",{className:"block text-gray-700 mb-2",children:"Select Project:"}),(0,a.jsxs)("select",{className:"p-2 border rounded w-full",value:j,onChange:r=>u(r.target.value),children:[(0,a.jsx)("option",{value:"",children:"-- Select Project --"}),g.map(r=>(0,a.jsx)("option",{value:r.id,children:r.id},r.id))]})]}),j&&(0,a.jsx)("div",{className:"mb-4 no-print",children:L?(0,a.jsx)("p",{children:"Loading quotes..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("label",{className:"block text-gray-700 mb-2",children:"Select Quote:"}),(0,a.jsxs)("select",{className:"p-2 border rounded w-full",value:D,onChange:r=>S(r.target.value),children:[(0,a.jsx)("option",{value:"",children:"-- Select Quote --"}),y.map(r=>(0,a.jsx)("option",{value:r.id,children:r.id},r.id))]})]})}),f&&(0,a.jsxs)("div",{className:"bg-white shadow rounded p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:j}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Project Description:"})," ",f.projectDetails.projectDetails]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Project EPC:"})," ",f.projectDetails.projectEPC]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Site Address:"})," ",f.projectDetails.siteAddress]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Latitude:"})," ",f.projectDetails.latitude]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Longitude:"})," ",f.projectDetails.longitude]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Panel QTY:"})," ",null==F?void 0:F.quoteDetails.panelQTY]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Solar Capacity:"})," ",null==F?void 0:F.quoteDetails.solarCapacity," kWp"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Battery Capacity:"})," ",null==F?void 0:F.quoteDetails.batteryCapacity," kWh"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tariff Type:"})," ",f.projectDetails.tariffType]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"NMD:"})," ",f.projectDetails.nmd," kVA"]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Consumption Distribution"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Offpeak:"})," ",null!==(h=null===(r=f.projectDetails.fractions)||void 0===r?void 0:r.offpeak)&&void 0!==h?h:"N/A"," %"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Peak:"})," ",null!==(x=null===(e=f.projectDetails.fractions)||void 0===e?void 0:e.peak)&&void 0!==x?x:"N/A"," %"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Standard:"})," ",null!==(b=null===(s=f.projectDetails.fractions)||void 0===s?void 0:s.standard)&&void 0!==b?b:"N/A"," %"]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Usage (kWh)"}),(0,a.jsxs)("table",{className:"w-[100%] border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Month"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Usage (kWh)"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"January"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.jan).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"February"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.feb).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"March"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.mar).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"April"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.apr).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"May"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.may).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"June"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.jun).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"July"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.jul).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"August"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.aug).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"September"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.sep).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"October"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.oct).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"November"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.nov).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"December"}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(f.projectDetails.usage.dec).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]})]})]})]})]}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Quote Data"}),F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6 bg-white p-4 rounded shadow",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Quote Name:"})," ",D]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Project Total (excl. VAT):"})," ",F.quoteDetails.overallTotal?Number(F.quoteDetails.overallTotal).toLocaleString("en-US",{style:"currency",currency:"ZAR"}):"N/A"]})]}),F.InsuranceAndMaintenance&&(0,a.jsxs)("div",{className:"mb-6 bg-white p-4 rounded shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Insurance & Maintenance"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Yearly Insurance Costs:"})," ",Number(F.InsuranceAndMaintenance.yearlyInsuranceCosts).toLocaleString("en-US",{style:"currency",currency:"ZAR"})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Yearly Maintenance Costs:"})," ",Number(F.InsuranceAndMaintenance.yearlyMaintenanceCosts).toLocaleString("en-US",{style:"currency",currency:"ZAR"})]})]}),F.solarPerformance&&(0,a.jsxs)("div",{className:"mb-6 bg-white p-4 rounded shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Solar Performance"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Annual Solar Production (kWh):"})," ",Number(F.solarPerformance.annual_solar_production_kwh).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})," kWh"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Average Self Consumption (%):"})," ",Number(F.solarPerformance.average_self_consumption_percent).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Exported to Grid (kWh):"})," ",Number(F.solarPerformance.total_exported_to_grid_kwh).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})," kWh"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Imported from Grid (kWh):"})," ",Number(F.solarPerformance.total_imported_from_grid_kwh).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})," kWh"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Self Consumed Energy (kWh):"})," ",Number(F.solarPerformance.total_self_consumed_energy_kwh).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})," kWh"]}),(0,a.jsx)("h3",{className:"font-semibold mt-4",children:"Monthly Solar Production (kWh)"}),(0,a.jsxs)("table",{className:"w-[100%] border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Month"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Production (kWh)"})]})}),(0,a.jsx)("tbody",{children:null===(n=F.solarPerformance.monthly_solar_production_kwh)||void 0===n?void 0:n.map((r,e)=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["Month ",e+1]}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(r).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]},e))})]}),(0,a.jsx)("h3",{className:"font-semibold mt-4",children:"Monthly Imported from Grid (kWh)"}),(0,a.jsxs)("table",{className:"w-[100%] border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Month"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Imported (kWh)"})]})}),(0,a.jsx)("tbody",{children:null===(l=F.solarPerformance.monthly_imported_from_grid_kwh)||void 0===l?void 0:l.map((r,e)=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["Month ",e+1]}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(r).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]},e))})]}),(0,a.jsx)("h3",{className:"font-semibold mt-4",children:"Monthly Exported to  Grid (kWh)"}),(0,a.jsxs)("table",{className:"w-[100%] border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Month"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Exported (kWh)"})]})}),(0,a.jsx)("tbody",{children:null===(d=F.solarPerformance.monthly_exported_to_grid_kwh)||void 0===d?void 0:d.map((r,e)=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["Month ",e+1]}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(r).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]},e))})]}),(0,a.jsx)("h3",{className:"font-semibold mt-4",children:"Monthly Battery Consumption (kWh)"}),(0,a.jsxs)("table",{className:"w-[100%] border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Month"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Battery Consumption (kWh)"})]})}),(0,a.jsx)("tbody",{children:null===(c=F.solarPerformance.monthly_battery_usage_kwh)||void 0===c?void 0:c.map((r,e)=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["Month ",e+1]}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(r).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]},e))})]}),(0,a.jsx)("h3",{className:"font-semibold mt-4",children:"Monthly Direct Solar Consumption (kWh)"}),(0,a.jsxs)("table",{className:"w-[100%] border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Month"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200",children:"Direct Consumption (kWh)"})]})}),(0,a.jsx)("tbody",{children:null===(m=F.solarPerformance.monthly_direct_solar_usage_kwh)||void 0===m?void 0:m.map((r,e)=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["Month ",e+1]}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:Number(r).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})})]},e))})]})]})]}):(0,a.jsx)("p",{children:"No quote data available"})]})}},3843:(r,e,s)=>{"use strict";s.d(e,{db:()=>o});var a=s(3915),i=s(5317);let t=(0,a.Wp)({apiKey:"AIzaSyDKxm2rzvjgsxfg1vJ6ZgzPJRPfY3R7HR4",authDomain:"phoenix-energy-firebase.firebaseapp.com",projectId:"phoenix-energy-firebase",storageBucket:"phoenix-energy-firebase.firebasestorage.app",messagingSenderId:"82665667347",appId:"1:82665667347:web:a6dab9227aa655573638e6",measurementId:"G-1CQS4L7V4Y"}),o=(0,i.aU)(t)},7948:(r,e,s)=>{Promise.resolve().then(s.bind(s,3819))}},r=>{var e=e=>r(r.s=e);r.O(0,[992,399,441,684,358],()=>e(7948)),_N_E=r.O()}]);