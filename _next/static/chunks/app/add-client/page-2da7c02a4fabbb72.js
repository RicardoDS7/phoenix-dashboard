(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{1891:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var r=a(5155),o=a(2115),t=a(5317),i=a(3843),n=a(5695);function c(){let e=(0,n.useRouter)(),[s,a]=(0,o.useState)([]),[c,l]=(0,o.useState)({projectName:"",siteAddress:"",latitude:"",longitude:"",projectEPC:"",projectDetails:"",tariffType:"",nmd:"",usage:{jan:"",feb:"",mar:"",apr:"",may:"",jun:"",jul:"",aug:"",sep:"",oct:"",nov:"",dec:""},fractions:{offpeak:"",standard:"",peak:""}}),[d,u]=(0,o.useState)([]),[g,m]=(0,o.useState)("");(0,o.useEffect)(()=>{(async function(){try{let e=(await (0,t.GG)((0,t.rJ)(i.db,"eskom_tariffs"))).docs.map(e=>e.id);a(e)}catch(e){console.error("Error fetching eskom_tariffs:",e)}})()},[]),(0,o.useEffect)(()=>{(async function(){try{let e=(await (0,t.GG)((0,t.rJ)(i.db,"eskom_tariffs"))).docs.map(e=>e.id);a(e);let s=(await (0,t.GG)((0,t.rJ)(i.db,"load_profiles"))).docs.map(e=>e.id);u(s)}catch(e){console.error("Error fetching data:",e)}})()},[]);let p=e=>{let{name:s,value:a}=e.target;s in c.usage?l(e=>({...e,usage:{...e.usage,[s]:a}})):s in c.fractions?l(e=>({...e,fractions:{...e.fractions,[s]:a}})):l(e=>({...e,[s]:a}))},f=async()=>{try{if(!c.projectName){alert("Project Name is required to save the document.");return}await (0,t.BN)((0,t.H9)(i.db,"clients",c.projectName),{projectDetails:{siteAddress:c.siteAddress,latitude:c.latitude,longitude:c.longitude,projectEPC:c.projectEPC,projectDetails:c.projectDetails,tariffType:c.tariffType,nmd:c.nmd,usage:{...c.usage},fractions:{...c.fractions},selectedLoadProfile:g,createdAt:new Date}}),alert("Client saved successfully!")}catch(e){console.error("Error saving client:",e),alert("Error saving client. Check console for details.")}};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col justify-center items-center p-4",children:[(0,r.jsx)("h1",{className:"text-6xl font-black mb-16",children:"New Client Details"}),(0,r.jsxs)("form",{className:"grid grid-cols-1 gap-6 max-w-4xl w-full",onSubmit:e=>e.preventDefault(),children:[(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Project Name"}),(0,r.jsx)("input",{type:"text",name:"projectName",value:c.projectName,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50",required:!0})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Site Address"}),(0,r.jsx)("input",{type:"text",name:"siteAddress",value:c.siteAddress,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Latitude"}),(0,r.jsx)("input",{type:"text",name:"latitude",value:c.latitude,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50"})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Longitude"}),(0,r.jsx)("input",{type:"text",name:"longitude",value:c.longitude,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50"})]})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Project EPC"}),(0,r.jsx)("input",{type:"text",name:"projectEPC",value:c.projectEPC,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50"})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Project Details"}),(0,r.jsx)("textarea",{name:"projectDetails",value:c.projectDetails,onChange:p,className:"mt-1 py-2 px-4 block w-full rounded-md  bg-gray-100 border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50"})]}),(0,r.jsx)("h3",{className:"text-2xl font-bold mt-6",children:"Tariff Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Tariff Type"}),(0,r.jsxs)("select",{name:"tariffType",value:c.tariffType,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50",children:[(0,r.jsx)("option",{value:"",children:"Select a Tariff"}),s.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"NMD (kVA)"}),(0,r.jsx)("input",{type:"number",name:"nmd",value:c.nmd,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50"})]})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Select Load Profile"}),(0,r.jsxs)("select",{value:g,onChange:e=>m(e.target.value),className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50",children:[(0,r.jsx)("option",{value:"",children:"Select a profile"}),d.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsx)("h3",{className:"text-2xl font-bold mt-6",children:"Energy Consumption (Last 12 Months)"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-6",children:Object.entries(c.usage).map(e=>{let[s,a]=e;return(0,r.jsxs)("label",{className:"block",children:[(0,r.jsxs)("span",{className:"text-gray-700 capitalize",children:[s," (kWh)"]}),(0,r.jsx)("input",{type:"number",name:s,value:a,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50"})]},s)})}),(0,r.jsx)("h3",{className:"text-2xl font-bold mt-6",children:"Time-Of-Use Distribution (Estimate)"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-6",children:Object.entries(c.fractions).map(e=>{let[s,a]=e;return(0,r.jsxs)("label",{className:"block",children:[(0,r.jsxs)("span",{className:"text-gray-700 capitalize",children:[s," (%)"]}),(0,r.jsx)("input",{type:"number",name:s,value:a,onChange:p,className:"mt-1 px-4 py-2 bg-gray-100 block w-full  rounded-md border-gray-300 shadow-sm  focus:border-indigo-300 focus:ring focus:ring-indigo-200  focus:ring-opacity-50"})]},s)})})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-6",children:[(0,r.jsx)("button",{onClick:f,className:"mt-8 bg-[#4c7380] cursor-pointer hover:bg-[#FFA07A]  text-white font-bold py-2 px-4 rounded-full",children:"Save"}),(0,r.jsx)("button",{onClick:()=>{e.push("/")},className:"mt-8 bg-[#4c7380] cursor-pointer hover:bg-[#FFA07A]  text-white font-bold py-2 px-4 rounded-full",children:"Return Home"})]})]})}},3424:(e,s,a)=>{Promise.resolve().then(a.bind(a,1891))},3843:(e,s,a)=>{"use strict";a.d(s,{db:()=>i});var r=a(3915),o=a(5317);let t=(0,r.Wp)({apiKey:"AIzaSyDKxm2rzvjgsxfg1vJ6ZgzPJRPfY3R7HR4",authDomain:"phoenix-energy-firebase.firebaseapp.com",projectId:"phoenix-energy-firebase",storageBucket:"phoenix-energy-firebase.firebasestorage.app",messagingSenderId:"82665667347",appId:"1:82665667347:web:a6dab9227aa655573638e6",measurementId:"G-1CQS4L7V4Y"}),i=(0,o.aU)(t)},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}})}},e=>{var s=s=>e(e.s=s);e.O(0,[992,399,441,684,358],()=>s(3424)),_N_E=e.O()}]);